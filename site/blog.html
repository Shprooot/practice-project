<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Журнал</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="nav-links">
                <a href="index.html">Главная</a>
                <a href="about.html">О проекте</a>
                <a href="team.html">Участники</a>
                <a href="blog.html">Журнал</a>
                <a href="resources.html">Ресурсы</a>
            </div>
        </nav>
    </header>

    <main>
        <section class="blog-section">
            <h2>Этапы проекта</h2>
            <div class="blog-timeline">
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <div class="timeline-content">
                        <h3>Этап 1: Интеграция с сервисом 2ГИС</h3>
                        <div class="timeline-details">
                            <p>Подготовка и интеграция данных с картографическим сервисом 2ГИС для создания точной геопривязки зданий университета.</p>
                            <div class="timeline-slider">
                                <div class="slider-container">
                                    <div class="slider-track">
                                        <div class="slide">
                                            <img src="images/photo_2025-05-11_17-15-30 — копия.jpg" alt="Визуализация проекта">
                                        </div>
                                        <div class="slide">
                                            <img src="images/photo_2025-05-11_17-15-31.jpg" alt="Визуализация проекта">
                                        </div>
                                    </div>
                                    <div class="slider-dots">
                                        <span class="dot active"></span>
                                        <span class="dot"></span>
                                    </div>
                                </div>
                            </div>
                            <ul class="timeline-features">
                                <li><i class="fas fa-check"></i> Геопривязка зданий</li>
                                <li><i class="fas fa-check"></i> Настройка интеграции</li>
                                <li><i class="fas fa-check"></i> Подготовка данных</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-icon">
                        <i class="fas fa-drafting-compass"></i>
                    </div>
                    <div class="timeline-content">
                        <h3>Этап 2: Планы этажей</h3>
                        <div class="timeline-details">
                            <p>Создание детальных планов этажей всех корпусов университета с учетом актуальной планировки и назначения помещений.</p>
                            <div class="timeline-slider">
                                <div class="slider-container">
                                    <div class="slider-track">
                                        <div class="slide">
                                            <img src="images/photo_2025-03-05_19-48-11.jpg" alt="План этажа 1">
                                        </div>
                                        <div class="slide">
                                            <img src="images/photo_2025-03-05_19-48-10.jpg" alt="План этажа 2">
                                        </div>
                                        <div class="slide">
                                            <img src="images/photo_2025-03-05_19-48-12.jpg" alt="План этажа 3">
                                        </div>
                                        <div class="slide">
                                            <img src="images/photo_2025-03-05_19-48-13.jpg" alt="План этажа 4">
                                        </div>
                                    </div>
                                    <div class="slider-dots">
                                        <span class="dot active"></span>
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                    </div>
                                </div>
                            </div>
                            <ul class="timeline-features">
                                <li><i class="fas fa-ruler-combined"></i> Замеры помещений</li>
                                <li><i class="fas fa-draw-polygon"></i> Создание планов</li>
                                <li><i class="fas fa-door-open"></i> Разметка помещений</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div class="timeline-content">
                        <h3>Этап 3: 3D-модели в Blender</h3>
                        <div class="timeline-details">
                            <p>Разработка трехмерных моделей зданий в Blender на основе планов, созданных в SweetHome3D.</p>
                            <div class="timeline-slider">
                                <div class="slider-container">
                                    <div class="slider-track">
                                        <div class="slide">
                                            <img src="images/photo_2025-05-11_17-28-41.jpg" alt="3D-модель в Blender 1">
                                        </div>
                                        <div class="slide">
                                            <img src="images/photo_2025-05-20_23-22-53.jpg" alt="3D-модель в Blender 2">
                                        </div>
                                        <div class="slide">
                                            <img src="images/photo_2025-05-11_15-50-60.jpg" alt="3D-модель в Blender 3">
                                        </div>
                                    </div>
                                    <div class="slider-dots">
                                        <span class="dot active"></span>
                                        <span class="dot"></span>
                                        <span class="dot"></span>
                                    </div>
                                </div>
                            </div>
                            <ul class="timeline-features">
                                <li><i class="fas fa-vector-square"></i> Импорт планов из SweetHome3D</li>
                                <li><i class="fas fa-cubes"></i> 3D-моделирование</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Модальное окно для просмотра изображений -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <img class="modal-image" src="" alt="Полноразмерное изображение">
            <span class="close-modal">&times;</span>
            <div class="modal-nav modal-prev">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="modal-nav modal-next">
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Функция инициализации слайдера
            function initializeSlider(sliderContainer) {
                const sliderTrack = sliderContainer.querySelector('.slider-track');
                const slides = sliderContainer.querySelectorAll('.slide');
                const dots = sliderContainer.querySelectorAll('.dot');
                let currentSlide = 0;
                let autoSlideInterval;

                function updateSlider() {
                    sliderTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
                    dots.forEach((dot, index) => {
                        dot.classList.toggle('active', index === currentSlide);
                    });
                }

                function nextSlide() {
                    currentSlide = (currentSlide + 1) % slides.length;
                    updateSlider();
                }

                function startAutoSlide() {
                    autoSlideInterval = setInterval(nextSlide, 5000);
                }

                function stopAutoSlide() {
                    clearInterval(autoSlideInterval);
                }

                // Обработчики для точек навигации
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', () => {
                        currentSlide = index;
                        updateSlider();
                        stopAutoSlide();
                        startAutoSlide();
                    });
                });

                // Добавляем обработчик клика по изображениям
                slides.forEach((slide, index) => {
                    const img = slide.querySelector('img');
                    img.addEventListener('click', () => {
                        openModal(img.src, sliderContainer, index);
                    });
                });

                startAutoSlide();

                sliderTrack.addEventListener('mouseenter', stopAutoSlide);
                sliderTrack.addEventListener('mouseleave', startAutoSlide);
            }

            // Инициализируем все слайдеры на странице
            document.querySelectorAll('.slider-container').forEach(initializeSlider);

            // Модальное окно
            const modal = document.getElementById('imageModal');
            const modalImg = modal.querySelector('.modal-image');
            const closeBtn = modal.querySelector('.close-modal');
            const prevBtn = modal.querySelector('.modal-prev');
            const nextBtn = modal.querySelector('.modal-next');
            let currentModalSlider = null;
            let currentModalIndex = 0;

            function openModal(imgSrc, sliderContainer, index) {
                modal.style.display = 'block';
                modalImg.src = imgSrc;
                currentModalSlider = sliderContainer;
                currentModalIndex = index;
                document.body.style.overflow = 'hidden'; // Запрещаем прокрутку страницы
            }

            function closeModal() {
                modal.style.display = 'none';
                document.body.style.overflow = ''; // Возвращаем прокрутку
            }

            function showModalImage(index) {
                const slides = currentModalSlider.querySelectorAll('.slide');
                currentModalIndex = (index + slides.length) % slides.length;
                const img = slides[currentModalIndex].querySelector('img');
                modalImg.src = img.src;
            }

            // Обработчики событий для модального окна
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            prevBtn.addEventListener('click', () => {
                if (currentModalSlider) {
                    showModalImage(currentModalIndex - 1);
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentModalSlider) {
                    showModalImage(currentModalIndex + 1);
                }
            });

            // Обработка клавиш
            document.addEventListener('keydown', (e) => {
                if (modal.style.display === 'block') {
                    if (e.key === 'Escape') closeModal();
                    if (e.key === 'ArrowLeft') showModalImage(currentModalIndex - 1);
                    if (e.key === 'ArrowRight') showModalImage(currentModalIndex + 1);
                }
            });
        });
    </script>

    <footer>
        <div class="footer-content">
            <p>© 2025 Студенты Московского Политеха</p>
        </div>
    </footer>

    <button class="scroll-to-top" id="scrollToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToTopButton = document.getElementById('scrollToTop');

            // Показываем/скрываем кнопку при прокрутке
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    scrollToTopButton.classList.add('visible');
                } else {
                    scrollToTopButton.classList.remove('visible');
                }
            });

            // Плавная прокрутка наверх при клике
            scrollToTopButton.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
